# é£é¹¤å¿«æ‹¼æ–¹æ¡ˆçš„é…ç½®è¡¥ä¸
# è¦†ç›– flypy_xhfast.schema.yaml å’Œ å…¨å±€é…ç½®ä¸­çš„éƒ¨åˆ†å‚æ•°ã€‚
# åœ¨æ­¤æ–¹æ¡ˆä¸‹ï¼Œè¿™é‡Œçš„é…ç½®å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ã€‚

##  ä¸€äº›å¸¸ç”¨çš„è®¾ç½®é¡¹, æ‰¾åˆ°éœ€è¦è¿›è¡Œçš„è®¾ç½®æ‰€åœ¨çš„è¡Œ,
##  å–æ¶ˆæ³¨é‡Š (åˆ é™¤è¡Œå¼€å¤´çš„å•ä¸ª # ç¬¦å·) å³å¯å¯ç”¨è¯¥è®¾ç½®é¡¹.
##  æ³¨æ„ä¸è¦åˆ é™¤å‰é¢çš„ç©ºæ ¼, YAML æ–‡ä»¶çš„ç¼©è¿›æ¯”è¾ƒä¸¥æ ¼, ç¼©è¿›ä¸å¯¹å®¹æ˜“æŠ¥é”™.
---

patch:
  # å€™é€‰èœå•
  menu/+:
    # æ³¨é‡Šæ‰ä¸‹è¡Œä»¥æ¢å¤å¸¸è§„å€™é€‰æ ‡ç­¾åºå·
    alternative_select_labels: [ â‘ , â‘¡, â‘¢, â‘£, â‘¤, â‘¥, â‘¦, â‘§, â‘¨, â“ª ]
    # alternative_select_keys: 1234567  # å€™é€‰é¡¹é€‰ä¸­å¿«æ·é”®
    page_size: 7                        # è‡ªå®šä¹‰å€™é€‰é¡¹ä¸ªæ•°

  # å€™é€‰èœå•å¸ƒå±€æ ·å¼
  style/+:
    font_point: 17                    # å€™é€‰å­—å¤§å°
    line_spacing: 5                   # è¡Œé—´è·å¤§å°
    show_paging: false                # æ˜¯å¦æ˜¾ç¤ºåˆ†é¡µç¬¦å·
    inline_preedit: false             # ç¼–ç ä½æ˜¯å¦åµŒå…¥å€™é€‰æ¡†
    text_orientation: horizontal      # å€™é€‰æ–‡å­—æ¨ªå‘(horizontal)/çºµå‘(vertical)
    candidate_list_layout: linear     # å€™é€‰èœå•æ¨ªå‘(linear)/çºµå‘(stacked)

  switches/+:
    - name: emoji
      states: [ğŸˆšï¸, ğŸ˜„]
      reset: 1
    - name: prediction  # ä»…ç”¨äºç§»åŠ¨ç«¯
      states: [ä¼‘æƒ³, è”æƒ³]
    - name: char_mode
      states: [è¯ç»„ä¼˜å…ˆ, å•å­—ä¼˜å…ˆ]
    - name: charset
      states: [é€šç”¨å­—é›†, å¢å»£å­—é›†]
      reset: 1
    - name: charset_hint
      states: [ç åŒºéšè—, ç åŒºæ˜¾ç¤º]
    - name: preedit_format
      states: [åŒæ‹¼æ˜¾ç¤º, å…¨æ‹¼æ˜¾ç¤º]
      reset: 0  # åˆ‡æ¢åé‡ç½®ä¸ºé»˜è®¤çŠ¶æ€
    - options: [mask_hint, tone_hint, comment_off]
      states: [è¾…ç å¼€, å£°è°ƒå¼€, æ³¨é‡Šå…³]
      reset: 2

  engine/+:
    processors/+:
    segmentors/+:
    translators/+:
    filters/+:
  'engine/processors/@next': predictor
  'engine/translators/@before 0': predict_translator
  'engine/processors/@before 0': lua_processor@*keybinder
  # æ³¨é‡Šä¸‹è¡Œ, ä»¥å–æ¶ˆä¸­è‹±æ··åˆå€™é€‰è¯è‡ªåŠ¨æ·»åŠ çš„ç©ºæ ¼
  'engine/filters/@before last': lua_filter@*word_append_space*filter
  # æ³¨é‡Šä¸‹è¡Œ, ä»¥å–æ¶ˆä¸­è‹±æ··åˆè¾“å‡ºä¸Šå±æ—¶è‡ªåŠ¨æ·»åŠ çš„å‰å¯¼ç©ºæ ¼
  # 'engine/processors/@after 1': lua_processor@*word_append_space*processor

  key_binder/+:
    import_preset: default            # ä» default.yaml ç»§æ‰¿é€šç”¨çš„
    fuzz_algebra_first: "8"           # `8/Control+q` ç®€æ‹¼ä¼˜å…ˆ
    char_mode: "Control+s"            # å•å­—/è¯ç»„ä¼˜å…ˆæ¨¡å¼åˆ‡æ¢
    pin_cand: "Control+t"             # å€™é€‰è¯ç½®é¡¶
    unpin_cand: "Control+t"           # å€™é€‰è¯å–æ¶ˆç½®é¡¶
    drop_cand: "Control+d"            # å¼ºåˆ¶åˆ è¯, æ— è§†è¾“å…¥çš„ç¼–ç 
    hide_cand: "Control+x"            # åŒ¹é…å½“å‰è¾“å…¥ç åéšè—æŒ‡å®šçš„å€™é€‰å­—è¯
    reduce_fq_cand: "Control+j"       # åŒ¹é…å½“å‰è¾“å…¥ç åé™é¢‘æŒ‡å®šçš„å€™é€‰å­—è¯
    switch_comment: "Control+n"       # åˆ‡æ¢æ³¨é‡Š(å°é¹¤å½¢ç  / å¸¦è°ƒæ‹¼éŸ³ / æ— )
    commit_comment: "Control+p"       # æ³¨é‡Šä¸Šå±
    switch_english: "Control+g"       # åˆ‡æ¢åˆ°è‹±æ–‡è¾“å…¥æ–¹æ¡ˆ
    remove_user_word: "Control+r"     # ç”¨æˆ·è¯å…¸é‡Œçš„å­—è¯è°ƒé¢‘ä¸ºè´Ÿ
    easydict_translate: "Control+y"   # è°ƒç”¨ Easydict ç¿»è¯‘é«˜äº®å­—è¯
    symbol_menu_fallback: "slash"     # ç¬¦å·äºŒçº§èœå•è¿”å›ä¸»èœå•é”®
    select_first_character: "9"       # `9/minus` ä»¥è¯å®šå­—(é¦–å­—)
    select_last_character: "0"        # `0/equal` ä»¥è¯å®šå­—(å°¾å­—)
    bindings/+:
      - {when: has_menu,  accept: ";", send: Control+2}         # åˆ†å·; ç”¨äºç¬¬2å€™é€‰
      - {when: has_menu,  accept: ".", send: Control+3}         # å¥å·. ç”¨äºç¬¬3å€™é€‰
      - {when: paging,    accept: comma, send: Page_Up}         # é€—å·, è¿”å›ä¸Šä¸€é¡µ
      - {when: has_menu,  accept: ']', send: Page_Down}         # æ‹¬å·] ä¸‹ä¸€é¡µ
      # - {when: has_menu,  accept: "'", send: Control+3}       # å¼•å·' ç”¨äºç¬¬3å€™é€‰
      # - {when: paging,    accept: minus,  send: Page_Up}      # å‡å·- è¿”å›ä¸Šä¸€é¡µ
      # - {when: paging,    accept: equal,  send: Page_Down}    # ç­‰å·= ä¸‹ä¸€é¡µ
      # - {when: has_menu,  accept: period, send: Page_Down}    # å¥å·. ä¸‹ä¸€é¡µ
      - {when: always,    accept: Control+Shift+0, select: .next}
      - {when: always,    accept: Control+Shift+E, select: easy_en}
      - {when: composing, accept: Shift+Tab,    send: Shift+Left}
      - {when: composing, accept: Control+i,    send: Shift+Left}
      - {when: composing, accept: Tab,          send: Shift+Right}
      - {when: composing, accept: Control+o,    send: Shift+Right}
      - {when: composing, accept: Control+w,    send: Control+BackSpace}

      # ä»¥ä¸‹æŒ‰é”®ç»‘å®šè§„åˆ™(å«`tag` / `match`)éœ€ keybinder(lua) æ”¯æŒ
      - {match: "^/$",    accept: "/", send: '{Down}'}
      - {match: "^=$",    accept: "=", send: '{Down}'}
      - {match: "^[a-z/]+'$", accept: ",", send: '{Shift+Left}'}
      - {match: "^[a-z/]+'$", accept: ".", send: '{Shift+Right}'}
      - {tag: calculator, accept: "'",     send: '{Page_Down}'}
      - {tag: calculator, accept: "Control+d", send: '{Delete}'}
      - {tag: calculator, accept: "(", send_sequence: '(){Left}'}
      - {match: "^.*\\)$", accept: ")", send_sequence: '{Right}'}
      - {tag: calculator, accept: "%", send_sequence: '/100'}
      - {tag: calculator, accept: "Shift+U", send_sequence: '10'}
      - {tag: calculator, accept: "Shift+B", send_sequence: '00'}
      - {tag: calculator, accept: "Shift+H", send_sequence: '100'}
      - {tag: calculator, accept: "Shift+Q", send_sequence: '000'}
      - {tag: calculator, accept: "Shift+K", send_sequence: '1000'}
      - {tag: calculator, accept: "Shift+W", send_sequence: '0000'}
      - {tag: chinese_number, accept: "o", send_sequence: '0'}
      - {tag: chinese_number, accept: "i", send_sequence: '1'}
      - {tag: chinese_number, accept: "b", send_sequence: '00'}
      - {tag: chinese_number, accept: "h", send_sequence: '100'}
      - {tag: chinese_number, accept: "q", send_sequence: '000'}
      - {tag: chinese_number, accept: "k", send_sequence: '1000'}
      - {tag: chinese_number, accept: "w", send_sequence: '0000'}
      - {tag: chinese_number, accept: "period", send_sequence: '.'}
      - {tag: chinese_number, accept: "s",   send_sequence: '{End}{Control+1}'}
      - {tag: chinese_number, accept: "d",   send_sequence: '{End}{Control+2}'}
      - {tag: chinese_number, accept: "f",   send_sequence: '{End}{Control+3}'}
      - {tag: chinese_number, accept: "j",   send_sequence: '{End}{Control+4}'}
      - {tag: chinese_number, accept: "u",   send_sequence: '{End}{Control+5}'}
      - {tag: chinese_number, accept: "m",   send_sequence: '{End}{Control+6}'}
      - {tag: date_time,      accept: "s",   send_sequence: '{End}{Control+3}'}
      - {tag: date_time,      accept: "d",   send_sequence: '{End}{Control+4}'}
      - {tag: date_time,      accept: "f",   send_sequence: '{End}{Control+5}'}
      - {tag: calculator, accept: "Shift+J", send_sequence: '{End}{Control+3}'}
      - {tag: calculator, accept: "Shift+I", send_sequence: '{End}{Control+4}'}
      - {tag: calculator, accept: "Shift+O", send_sequence: '{End}{Control+5}'}
      - {tag: calculator, accept: "Shift+L", send_sequence: '{End}{Control+6}'}

  recognizer/+:
    patterns/+:
      LaTeX: "^(/lt|lT)(.*)$"                     # LaTeX
      history: "^(/hs|hH|uH)$"                    # ä¸Šå±å†å²
      flypy_help: "^(/oh|oH)$"                    # å¸®åŠ©èœå•
      shortcut_cmd: "^/kj[a-z]*$"                 # å¿«æ·æŒ‡ä»¤(æ‰§è¡Œå‘½ä»¤)
      shortcut_app: "^/jk[a-z]*$"                 # å¿«æ·æŒ‡ä»¤(å¯åŠ¨åº”ç”¨)
      flypy_key_map: "^/ok[a-z]*$"                # å°é¹¤åŒæ‹¼é”®ä½å¸®åŠ©
      flypy_switcher: "^(/so|sO)$"                # åˆ‡æ¢æ–¹æ¡ˆé…ç½®é€‰é¡¹
      calculator: "^(=|cC)([^,;']*)$"             # è®¡ç®—å™¨(å¯æŸ¥å¸®åŠ©)
      flypy_radical: "^(/fr|rL)[a-z]+$"           # å•å­—éƒ¨ä»¶ç»„å­—(æŸ¥æ‹¼éŸ³)
      chinese_lunar:  "^(/nl|nL)[0-9]*$"          # ä¸­å›½å†œå†(å¯åæŸ¥)
      chinese_number: "^(/nn|nN)[0-9.-]+$"        # ä¸­æ–‡å¤§å†™æ•°å­—(é‡‘é¢)
      date_time: '^(/wd|date|orq)[-\+][0-9]+$'    # æ—¥æœŸ(å¯æŸ¥å‰åæŒ‡å®šNæ—¥)

  date_time_seg:
    patterns:
      week: "^(/wk|week|oxq)$"                    # æ˜ŸæœŸ
      time: "^(/wt|time|osj)'?$"                  # æ—¶é—´
      date: '^(/wd|date|orq)[-\+]?$'              # æ—¥æœŸ
      timestamp: "^(/wts|/uts|timestamp|ots)$"    # æ—¶é—´æˆ³
      week_before_after: "^/(wuz|wlk|wxz|wnk)$"   # ä¸Šå‘¨ä¸‹å‘¨
      date_before_after: "^/(wqt|wzt|wmt|wht)$"   # [å‰æ˜¨æ˜å]å¤©
      month_before_after: "^/(wuy|wlm|wxy|wnm)$"  # ä¸Šä¸ªæœˆä¸‹ä¸ªæœˆ

  punctuator/+:
    digit_separators: ".:"                      # æŒ‡å®šè¦è½¬æ¢ä¸ºè‹±æ–‡åŠè§’çš„ç¬¦å·, è‹¥åŒå‡»åˆ™æ¢å¤å…¨è§’(ä¸­æ–‡)
    # digit_separator_action: commit            # ä¸Šä¸€è¡ŒæŒ‡å®šçš„ç¬¦å·åœ¨æŒ‰ä¸‹æ•°å­—åçš„åŠ¨ä½œè¡Œä¸º
    symbol_menu_prefix: '/vs'
    symbol_normal_prefix: '/'
    symbols/+:
    full_shape/+:
    half_shape/+:
      # '"': {pair: ['â€˜', 'â€™']}
      # "'": {pair: ['â€œ', 'â€']}
      # ";": {commit: "ï¼›"}           # å–æ¶ˆæ³¨é‡Šå, æ¢å¤é»˜è®¤åˆ†å·
      ";": [";", "ï¼›"]                # æ·»åŠ æ³¨é‡Š, ä»¥æ¢å¤é»˜è®¤åˆ†å·
      "_": "_"
      '\': ['ï½¤', 'ã€', '\', 'ï¼¼']
      "@":
        - "@"
        # - "@xxx.com"
        - "@gmail.com"
        - "@foxmail.com"
        - "@outlook.com"
        - "@hotmail.com"
        - "@qq.com"
        - "@163.com"
        - "@139.com"

  speller/+:
    algebra/+:
      # - derive|/||                  # å–æ¶ˆæ³¨é‡Š,ç›´æ¥è¾…ç (æ–°æ‰‹ä¸æ¨è)

      ## æ¨¡ç³ŠéŸ³:
      - derive/^([qx])v/$1u/
      - derive/^([jy])u/$1v/
      # - derive/^l(.*)/n$1/          # l => n
      # - derive/^n(.*)/l$1/          # n => l
      # - derive/^v(.*)/z$1/          # zh => z
      # - derive/^i(.*)/c$1/          # ch => c
      # - derive/^u(.*)/s$1/          # sh => s
      # - derive/^(.*)k/$1b/          # ing => in
      # - derive/^(.*)g/$1f/          # [zcs][h]eng => [zcs][h]en
      # - derive/^(.*)f/$1g/          # [zcs][h]en => [zcs][h]eng

  easy_en/+:                          # è‹±æ–‡å•è¯è¾“å…¥æ–¹æ¡ˆ
    tips: "è‹±æ–‡"
    wildcard: '*'
    # tag: easy_en
    word_search_limit: 666            # æ¨¡ç³ŠåŒ¹é…æœ€å¤šè¿­ä»£æ•°

  custom_phrase/+:                    # è‡ªå®šä¹‰çŸ­è¯­
    comment_mark: " ğŸ“Œ"               # æ³¨è§£æ ‡è®°

  flypy_key_map/+:                    # å°é¹¤åŒæ‹¼é”®ä½å¸®åŠ©
    prefix: "/ok"
    tips: "åŒæ‹¼æŸ¥é”®"

  radical_lookup/+:                   # éƒ¨ä»¶ç»„å­—åæŸ¥æ‹¼éŸ³
    overwrite_comment: false
    dictionary: flyhe_fast            # å¯è‡ªè¡Œæ›´æ¢åæŸ¥è¯å…¸

  pin_word:                           # è¯æ¡ç½®é¡¶é…ç½®
    word_quality: 1000
    comment_mark: " áµ€á´¼á´¾"              # ğŸ” ç½®é¡¶è¯æ ‡è®°

  pair_punct:                         # ç¬¦å·é…å¯¹å¼€å…³
    enable: true

  emoji_reduce:                       # Emoji é™é¢‘
    index: 6                          # åˆ° index ä½ç½®

  cold_word_reduce:                   # é«˜äº®è¯æ¡é™é¢‘
    index: 4                          # åˆ° index ä½ç½®
    excluded_types: ["easy_en"]

  LaTeX:                              # LaTeX å…¬å¼è¾“å…¥
    tag: LaTeX
    # prefix: "lT"
    prefix: "/lt"
    tips: "LaTeX å…¬å¼"

  history:                            # ä¸Šå±å†å²è®°å½•
    tag: history
    # prefix: "/hs"
    prefix: "hH"
    tips: "ä¸Šå±å†å²"
    max_count: 99
    initial_quality: 999
    comment_max_length: 9
    excluded_types: ["punct"]

  calculator:                         # ç®€æ˜“è®¡ç®—å™¨
    tag: calculator
    # prefix: "="
    prefix: "cC"
    suffix: "'"
    tips: "è®¡ç®—å™¨"

  cand_selector:                      # å€™é€‰é€‰æ‹©å™¨
    word_lookup_limit: 666            # æ£€ç´¢æœ€å¤šè¿­ä»£æ•°
    auto_select_char: true            # å•å­—ä¼˜å…ˆæ—¶å…¨ç å”¯ä¸€åˆ™è‡ªåŠ¨é¡¶å±(å°é¹¤éŸ³å½¢æ•ˆæœ)
    auto_select_phrase: false         # è¯ç»„åŠ é—´æ¥è¾…ç å”¯ä¸€åˆ™è‡ªåŠ¨ä¸Šå±(é»˜è®¤å…³é—­)
    if_unmatched_show_mark: "â­•ï¸"      # å½“æœªåŒ¹é…åˆ°å€™é€‰é¡¹æ—¶, é¦–é€‰ yield ä¸€ä¸ªæ ‡è®°ä»¥æç¤º(ç•™ç©ºåˆ™ä¸æ˜¾ç¤º)
    tone_convert_format:              # å£°è°ƒè¿‡æ»¤(ä¾æ¬¡å¯¹åº”: ä¸€[è½»]äºŒä¸‰å››å£°), ä¿®æ”¹åˆ™ä¸é€‚é…åŒæ–‡é”®ç›˜
      - xlit/IUNM/1234/

  flypy_fuzzy:                        # ç®€æ‹¼ç¿»è¯‘å™¨
    enable_fuzz_func: true            # æ˜¯å¦å¼€å¯ç®€æ‹¼åŠŸèƒ½(æ”¯æŒä¸­è‹±æ•°æ··åˆ)
    fuzz_start_length: 2              # ç®€æ‹¼å¼€å§‹é•¿åº¦
    fuzz_max_length: 7                # ç®€æ‹¼æœ€å¤§é•¿åº¦
    word_lookup_limit: 666            # æ£€ç´¢æœ€å¤šè¿­ä»£æ•°

  chinese_number:                     # ä¸­æ–‡å¤§å†™æ•°å­—(é‡‘é¢)
    tag: chinese_number
    # prefix: "/nn"
    prefix: "nN"
    suffix: "'"
    tips: "ä¸­æ–‡æ•°å­—"
    select_keys: "sdfjum"

  chinese_lunar:                      # ä¸­å›½å†œå†(å¯åæŸ¥)
    tag: chinese_lunar
    # prefix: "/nl"
    prefix: "nL"
    suffix: "'"
    tips: "å†œå†"

  date_time:
    date_format:
      # å¹´ä»½æ ¼å¼: year_cn: äºŒã€‡äºŒå…­å¹´; year: 2026
      # æœˆä»½æ ¼å¼: month_cn: äºŒæœˆ; month: 02; month_en: February; month_en_st: Feb.
      # å½“æ—¥æ ¼å¼: day_cn: äºŒåäºŒ; day: 22; day_en_st: 22th
      # æ˜ŸæœŸæ ¼å¼: week_cn: æ˜ŸæœŸæ—¥; week_en: Sunday; week_en_st: Sun.
      - "{year}å¹´{month}æœˆ{day}æ—¥"                        # 2026å¹´02æœˆ22æ—¥
      - "{year}/{month}/{day}"                            # 2026/02/22
      - "{year}.{month}.{day}"                            # 2026.02.22
      - "{year_cn}å¹´{month_cn}æœˆ{day_cn}æ—¥"               # äºŒã€‡äºŒå…­å¹´äºŒæœˆäºŒåäºŒæ—¥
      - "{month_en_st} {day_en_st}, {year}"               # Feb 05th, 2026
      - "{day_en_st} {month_en}, {year}"                  # 22th February, 2026
      - "{month_en} {day_en_st}, {year}"                  # February 22th, 2026
      - "{year}.{month}.{day} {hour}:{min}:{sec}"         # 2026.02.22 14:30:45
      - "{year}å¹´{month}æœˆ{day}æ—¥ {hour}ç‚¹{min}åˆ†{sec}ç§’" # 2026å¹´02æœˆ22æ—¥ 18ç‚¹37åˆ†06ç§’
    time_format:
      # æ—¶é—´æ ¼å¼: hour: 18; min: 30; sec: 45; TS: AM/PM
      - "{hour}:{min}"            # 18:30
      - "{hour}:{min} {TS}"       # 6:30 PM
      - "{hour}:{min}:{sec} {TS}" # 6:30:45 PM
      - "{hour}:{min}:{sec}"      # 18:30:45
      - "{hour}ç‚¹{min}åˆ†"         # 18ç‚¹37åˆ†
      - "{hour}ç‚¹{min}åˆ†{sec}ç§’"  # 18ç‚¹37åˆ†06ç§’
      - "{hour}æ—¶{min}åˆ†{sec}ç§’"  # 18æ—¶37åˆ†06ç§’
    # æ—¶é—´å‰ç¼€: å‡Œæ™¨, æ—©ä¸Š, ä¸Šåˆ, ä¸­åˆ, ä¸‹åˆ, å¤œæ™š, åˆå¤œ
    enable_time_prefix: true      # æ˜¯å¦å¼€å¯æ—¶é—´å‰ç¼€(é»˜è®¤å¼€å¯, å¯åœ¨è§¦å‘è¯æœ«å°¾æ·»åŠ å•å¼•å·'ä¸´æ—¶å…³é—­)

  predictor:                          # å€™é€‰å­—è¯è”æƒ³é¢„æµ‹
    db: predict.db
    max_candidates: 7                 # è”æƒ³çš„å€™é€‰é¡¹ä¸ªæ•°
    max_iterations: 1                 # è”æƒ³é¢„æµ‹çš„æ¬¡æ•°
